{"ast":null,"code":"import { TodoDataService } from '../service/data/todo-data.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { User } from '../list-todos/list-todos.component';\nimport { BasicAuthenticationService } from '../service/basic-authentication.service';\nimport { EncrDecrServiceService } from '../service/encr-decr-service.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/data/todo-data.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../service/basic-authentication.service\";\nimport * as i4 from \"../service/encr-decr-service.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../app-spinner/app-spinner.component\";\nfunction RegisterComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"div\", 6)(3, \"div\", 7);\n    i0.ɵɵelement(4, \"app-app-spinner\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction RegisterComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \"SuccessFully Registered....... !!\");\n    i0.ɵɵelement(2, \"br\")(3, \"br\");\n    i0.ɵɵelementStart(4, \"a\", 9);\n    i0.ɵɵtext(5, \"Go To Home\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \".\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_div_4_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26)(1, \"span\");\n    i0.ɵɵtext(2, \" Username is required.*\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_4_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_div_4_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26)(1, \"span\");\n    i0.ɵɵtext(2, \" Enter Valid Email.*\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_4_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26)(1, \"span\");\n    i0.ɵɵtext(2, \"Enter valid Password (one number and one letter,and 8 or more characters required*)\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_4_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26)(1, \"span\");\n    i0.ɵɵtext(2, \" Enter Valid Phone No.*\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"form\", 11, 0);\n    i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_div_4_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const todoForm_r2 = i0.ɵɵreference(2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(!todoForm_r2.invalid && ctx_r2.saveTodo());\n    });\n    i0.ɵɵelementStart(3, \"div\", 12)(4, \"div\", 13)(5, \"div\", 14)(6, \"p\", 15);\n    i0.ɵɵtext(7, \"Register\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 16)(9, \"div\", 17)(10, \"div\", 18)(11, \"div\", 19)(12, \"input\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_div_4_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.userName, $event) || (ctx_r2.userName = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, RegisterComponent_div_4_span_13_Template, 3, 0, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, RegisterComponent_div_4_span_14_Template, 2, 0, \"span\", 21);\n    i0.ɵɵelementStart(15, \"div\", 19)(16, \"input\", 22);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_div_4_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.userEmail, $event) || (ctx_r2.userEmail = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, RegisterComponent_div_4_span_17_Template, 3, 0, \"span\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 18)(19, \"div\", 19)(20, \"input\", 23);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_div_4_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.userPassword, $event) || (ctx_r2.userPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, RegisterComponent_div_4_span_21_Template, 3, 0, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 19)(23, \"input\", 24);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_div_4_Template_input_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.userPhoneNumber, $event) || (ctx_r2.userPhoneNumber = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, RegisterComponent_div_4_span_24_Template, 3, 0, \"span\", 21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(25, \"input\", 25);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const todoForm_r2 = i0.ɵɵreference(2);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.userName);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", todoForm_r2.dirty && todoForm_r2.invalid);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", todoForm_r2.dirty && todoForm_r2.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.userEmail);\n    i0.ɵɵproperty(\"email\", true);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", todoForm_r2.dirty && todoForm_r2.invalid);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.userPassword);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", todoForm_r2.dirty && todoForm_r2.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.userPhoneNumber);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", todoForm_r2.dirty && todoForm_r2.invalid);\n  }\n}\nfunction RegisterComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelement(3, \"br\")(4, \"br\");\n    i0.ɵɵelementStart(5, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function RegisterComponent_div_5_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.refresh());\n    });\n    i0.ɵɵtext(6, \"Register Here\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMsg);\n  }\n}\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(todoService, router, routerNavigate, authenticateUser, encryptService) {\n      this.todoService = todoService;\n      this.router = router;\n      this.routerNavigate = routerNavigate;\n      this.authenticateUser = authenticateUser;\n      this.encryptService = encryptService;\n      this.id = -1;\n      this.errorMsg = \"Something Went Wrong, Please Try Again !!\";\n      this.progress = 0;\n      this.progressBar = document.querySelector('.progress-bar');\n    }\n    ngOnInit() {}\n    saveTodo() {\n      this.showRegister = true;\n      this.user = new User(this.id, this.userName, this.userEmail, this.userPhoneNumber, this.encryptService.testEncrypt(this.userPassword), 'null');\n      this.addThroughPhp(this.user);\n      const getDownloadProgress = () => {\n        if (this.progress <= 110) {\n          // console.log(this.progress);\n          this.progress = this.progress + 1;\n          this.showRegisterPopup = false;\n          this.showSpinner = true;\n        } else {\n          clearInterval(this.intervalId);\n          this.showRegisterPopup = true;\n          this.showRegister = false;\n          if (this.showRegisterPopup && !this.isValid) {\n            this.showForm = true;\n          }\n          this.showSpinner = false;\n          if (this.isValid == true) {\n            this.routerNavigate.navigate(['main', this.userName]);\n          }\n        }\n      };\n      this.intervalId = setInterval(getDownloadProgress, 29);\n    }\n    addThroughPhp(user) {\n      this.encryptService.testEncrypt(user.userPassword);\n      this.todoService.addUserMongoDB(user).subscribe(data => {\n        console.log(JSON.parse(JSON.stringify(data)).data);\n        if (JSON.parse(JSON.stringify(data)).data == \"User Already Exist\") {\n          this.errorMsg = \"User Already Exist !!\";\n          this.isValid = false;\n          this.isResponse = true;\n          this.showSpinner = false;\n        } else {\n          this.isValid = true;\n          this.isResponse = true;\n          this.authenticateUser.setAuthorizedUser(this.userName);\n          sessionStorage.setItem('verifiedUser', this.userName);\n          sessionStorage.setItem('email', JSON.parse(JSON.stringify(data)).userEmail);\n          sessionStorage.setItem('phone', JSON.parse(JSON.stringify(data)).userPhoneNumber);\n          sessionStorage.setItem('id', JSON.parse(JSON.stringify(data))._id);\n        }\n      }, error => {\n        console.log(error);\n      });\n    }\n    addTodo() {\n      this.authenticateUserDetail();\n    }\n    loginHere() {\n      this.routerNavigate.navigate(['main', this.userName]);\n    }\n    authenticateUserDetail() {\n      this.authenticateUser.logout();\n      this.authenticateUser.excuteJWTAuthenticationService(this.userName, this.userPassword, this.userEmail, this.userPhoneNumber, \"true\").subscribe(data => {\n        if (this.authenticateUser.getAuthorizedToken() == \"Bearer User Already Present\") {\n          this.errorMsg = \"User Name or Email Already Present !!\";\n          console.log(this.authenticateUser.getAuthorizedToken());\n          this.isValid = false;\n          this.isResponse = true;\n          this.showSpinner = false;\n        } else {\n          this.isValid = true;\n          this.isResponse = true;\n        }\n      }, error => {\n        this.isValid = false;\n        this.isResponse = true;\n      });\n    }\n    refresh() {\n      window.location.reload();\n    }\n    static #_ = this.ɵfac = function RegisterComponent_Factory(t) {\n      return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.TodoDataService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.BasicAuthenticationService), i0.ɵɵdirectiveInject(i4.EncrDecrServiceService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RegisterComponent,\n      selectors: [[\"app-register\"]],\n      decls: 6,\n      vars: 4,\n      consts: [[\"todoForm\", \"ngForm\"], [\"style\", \"height: 1000px; width: 200px;\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"registerform\", 4, \"ngIf\"], [2, \"height\", \"1000px\", \"width\", \"200px\"], [1, \"wrapper\"], [1, \"overlay\"], [1, \"spinner-wrapper\"], [1, \"alert\", \"alert-success\"], [\"routerLink\", \"/main\"], [1, \"registerform\"], [\"name\", \"todoForm\", 3, \"ngSubmit\"], [1, \"container\", \"register-form\"], [1, \"form\"], [1, \"no\"], [2, \"align-content\", \"center\", \"font-size\", \"25px\"], [1, \"form-content\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Enter Name *\", \"name\", \"userName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"style\", \"color:red\", 4, \"ngIf\"], [\"type\", \"email\", \"placeholder\", \"Enter Email *\", \"name\", \"userEmail\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"email\"], [\"type\", \"text\", \"placeholder\", \"Enter Password *\", \"id\", \"userPassword\", \"name\", \"userPassword\", \"pattern\", \"(?=.*\\\\d)(?=.*[a-z]).{8,}\", \"title\", \"Must contain at least one number and one letter, and at least 8 or more characters\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"Enter Phone No. *\", \"name\", \"phone\", \"pattern\", \"(?=.*\\\\d)(?=.*[0-9]).{10,}\", \"maxlength\", \"10\", \"title\", \"Enter valid Phone No.\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\", \"name\", \"\", \"value\", \"Submit\", 1, \"btnSubmit\", 2, \"width\", \"70px\"], [2, \"color\", \"red\"], [1, \"alert\", \"alert-warning\", 2, \"width\", \"1000px\"], [1, \"btn\", \"btn-success\", 3, \"click\"]],\n      template: function RegisterComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"br\")(1, \"br\");\n          i0.ɵɵtemplate(2, RegisterComponent_div_2_Template, 5, 0, \"div\", 1)(3, RegisterComponent_div_3_Template, 7, 0, \"div\", 2)(4, RegisterComponent_div_4_Template, 26, 10, \"div\", 3)(5, RegisterComponent_div_5_Template, 7, 1, \"div\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.showSpinner);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showRegisterPopup && ctx.isValid && ctx.isResponse);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.showRegister && !ctx.isValid && !ctx.showForm);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showRegisterPopup && !ctx.isValid && ctx.isResponse);\n        }\n      },\n      dependencies: [i5.NgIf, i2.RouterLink, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.MaxLengthValidator, i6.PatternValidator, i6.EmailValidator, i6.NgModel, i6.NgForm, i7.AppSpinnerComponent],\n      styles: [\".no[_ngcontent-%COMP%]{text-align:center;height:80px;background:-webkit-linear-gradient(left,#0072ff,#8811c5);color:#fff;font-weight:700;line-height:80px}.form-content[_ngcontent-%COMP%]{padding:5%;border:1px solid #ced4da;margin-bottom:2%}.form-control[_ngcontent-%COMP%]{border-radius:1.5rem}.btnSubmit[_ngcontent-%COMP%]{border:none;border-radius:1.5rem;padding:1%;width:20%;cursor:pointer;background:#0062cc;color:#fff}input.ng-invalid[_ngcontent-%COMP%]{background-color:pink}input.ng-valid[_ngcontent-%COMP%]{background-color:#90ee90}\"]\n    });\n  }\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}