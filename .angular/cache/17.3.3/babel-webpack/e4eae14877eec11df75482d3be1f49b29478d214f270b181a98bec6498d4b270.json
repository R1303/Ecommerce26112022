{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { BasicAuthenticationService } from '../service/basic-authentication.service';\nimport { TodoDataService } from '../service/data/todo-data.service';\nimport { timer } from 'rxjs';\nimport * as MobileDetect from 'mobile-detect';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../service/data/todo-data.service\";\nimport * as i3 from \"../service/basic-authentication.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../app-spinner/app-spinner.component\";\nfunction AllAddressComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"div\", 6)(3, \"div\", 7);\n    i0.ɵɵelement(4, \"app-app-spinner\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction AllAddressComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.alertMsg, \"\\n\");\n  }\n}\nfunction AllAddressComponent_table_3_tbody_9_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const address_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(address_r3.address_type);\n  }\n}\nfunction AllAddressComponent_table_3_tbody_9_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 16);\n    i0.ɵɵtext(1, \"\\u00A0\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AllAddressComponent_table_3_tbody_9_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\")(1, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function AllAddressComponent_table_3_tbody_9_span_11_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const address_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.makeDefault(address_r3._id));\n    });\n    i0.ɵɵtext(2, \"Make Default\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AllAddressComponent_table_3_tbody_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tbody\")(1, \"tr\");\n    i0.ɵɵtemplate(2, AllAddressComponent_table_3_tbody_9_td_2_Template, 2, 1, \"td\", 12)(3, AllAddressComponent_table_3_tbody_9_td_3_Template, 2, 0, \"td\", 12);\n    i0.ɵɵelementStart(4, \"td\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 14);\n    i0.ɵɵtemplate(11, AllAddressComponent_table_3_tbody_9_span_11_Template, 3, 0, \"span\", 3);\n    i0.ɵɵtext(12, \"\\u00A0\\u00A0\");\n    i0.ɵɵelementStart(13, \"span\")(14, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function AllAddressComponent_table_3_tbody_9_Template_button_click_14_listener() {\n      const address_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.deleteAddress(address_r3.address_id));\n    });\n    i0.ɵɵtext(15, \"Delete\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const address_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", address_r3.address_type != \"null\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", address_r3.address_type == \"null\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", address_r3.address_line_1, \",\", address_r3.address_line_2, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", address_r3.city, \",\", address_r3.state, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(address_r3.pincode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", address_r3.address_type == \"null\");\n  }\n}\nfunction AllAddressComponent_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 9)(1, \"thead\")(2, \"tr\")(3, \"th\", 10);\n    i0.ɵɵtext(4, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 10);\n    i0.ɵɵtext(6, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 10);\n    i0.ɵɵtext(8, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(9, AllAddressComponent_table_3_tbody_9_Template, 16, 8, \"tbody\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.addressArray);\n  }\n}\nfunction AllAddressComponent_div_4_div_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const address_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(address_r6.address_type);\n  }\n}\nfunction AllAddressComponent_div_4_div_1_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function AllAddressComponent_div_4_div_1_div_14_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const address_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.makeDefault(address_r6._id));\n    });\n    i0.ɵɵelementStart(2, \"p\", 21);\n    i0.ɵɵtext(3, \"Set Default\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction AllAddressComponent_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"div\", 18);\n    i0.ɵɵtemplate(3, AllAddressComponent_div_4_div_1_span_3_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"span\")(9, \"div\")(10, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AllAddressComponent_div_4_div_1_Template_button_click_10_listener() {\n      const address_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.deleteAddress(address_r6._id));\n    });\n    i0.ɵɵelementStart(11, \"p\", 21);\n    i0.ɵɵtext(12, \"Delete\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵtemplate(14, AllAddressComponent_div_4_div_1_div_14_Template, 4, 0, \"div\", 3);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const address_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", address_r6.address_type != \"null\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\" \", address_r6.address_line_1, \" \", address_r6.address_line_2, \" \", address_r6.city, \",\", address_r6.state, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", address_r6.pincode, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", address_r6.address_type == \"null\");\n  }\n}\nfunction AllAddressComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AllAddressComponent_div_4_div_1_Template, 15, 7, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.addressArray);\n  }\n}\nexport let AllAddressComponent = /*#__PURE__*/(() => {\n  class AllAddressComponent {\n    constructor(route, todoService, basicAuthService) {\n      this.route = route;\n      this.todoService = todoService;\n      this.basicAuthService = basicAuthService;\n      this.progress = 0;\n      this.showProgress = false;\n    }\n    ngOnInit() {\n      this.User = this.basicAuthService.getUserById();\n      var userAgent = window.navigator.userAgent;\n      var md = new MobileDetect(userAgent);\n      this.isPC = md.mobile() == null;\n      this.isAdmin = this.basicAuthService.isAdmin();\n      this.onPageLoad();\n      const getDownloadProgress = () => {\n        if (this.progress <= 55) {\n          this.progress = this.progress + 1;\n          this.showSpinner = true;\n        } else {\n          this.showScreen = true;\n          this.showSpinner = false;\n          clearInterval(this.intervalId);\n        }\n      };\n      this.intervalId = setInterval(getDownloadProgress, 20);\n    }\n    onPageLoad() {\n      this.todoService.getAddressUsingUserIDMongoDB(sessionStorage.getItem('id')).subscribe(response => {\n        this.addressArray = response;\n        if (this.addressArray.length > 0) {\n          this.showAddress = true;\n          this.address = this.addressArray[this.addressArray.length - 1];\n          // alert(this.address.address_type!=\"null\");\n        }\n        if (this.addressArray.length > 1) {\n          this.isMoreAddress = true;\n        }\n      });\n    }\n    selectAddressHit(id) {\n      for (var i = 0; i < this.addressArray.length; i++) {\n        var address = this.addressArray[i];\n        if (address._id == id) {\n          this.selectedAddress = address;\n          console.log(this.selectedAddress);\n          this.line1 = this.selectedAddress.address_line_1;\n          this.line2 = this.selectedAddress.address_line_2;\n          this.city = this.selectedAddress.city;\n          this.state = this.selectedAddress.state;\n          this.pincode = this.selectedAddress.pincode;\n          this.selectedAddress.address_type = \"default\";\n        }\n      }\n    }\n    makeDefault(id) {\n      this.showSpinner = true;\n      this.selectAddressHit(id);\n      if (this.selectedAddress != null) {\n        this.todoService.UpdateAddressMongoDB(sessionStorage.getItem('id'), this.selectedAddress).subscribe(response => {\n          this.showAlertPopup(\"Address Successfull Updated !!\");\n          this.updateAddressArray = this.addressArray.filter(x => x._id != id);\n          this.updateAddressArray.forEach(element => {\n            element.address_type = \"null\";\n            this.todoService.UpdateAddressMongoDB(sessionStorage.getItem('id'), element).subscribe();\n          });\n        });\n      } else {\n        alert(\"Please Select an Address\");\n      }\n      this.showSpinner = false;\n    }\n    deleteAddress(id) {\n      this.todoService.deleteAddress(id).subscribe(response => {\n        this.showAlertPopup(\"Address Successfully Deleted !!\");\n        this.onPageLoad();\n      });\n    }\n    showAlertPopup(message) {\n      const source = timer(1000, 1000);\n      const abc = source.subscribe(val => {\n        if (val == 1) {\n          abc.unsubscribe();\n          this.showAlert = false;\n        } else {\n          this.onPageLoad();\n          this.showAlert = true;\n          this.alertMsg = message;\n        }\n      });\n    }\n    static #_ = this.ɵfac = function AllAddressComponent_Factory(t) {\n      return new (t || AllAddressComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TodoDataService), i0.ɵɵdirectiveInject(i3.BasicAuthenticationService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AllAddressComponent,\n      selectors: [[\"app-all-address\"]],\n      decls: 6,\n      vars: 4,\n      consts: [[\"style\", \"height: 1000px; width: 200px;\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"table\", \"style\", \"border: 4px;border-color: black;\", 4, \"ngIf\"], [4, \"ngIf\"], [2, \"height\", \"1000px\", \"width\", \"200px\"], [1, \"wrapper\"], [1, \"overlay\"], [1, \"spinner-wrapper\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\"], [1, \"table\", 2, \"border\", \"4px\", \"border-color\", \"black\"], [\"scope\", \"col\", 2, \"background-color\", \"green\", \"color\", \"#000\"], [4, \"ngFor\", \"ngForOf\"], [\"width\", \"10%\", \"style\", \"color: black;\", 4, \"ngIf\"], [\"width\", \"60%\", 2, \"color\", \"black\"], [\"width\", \"40%\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"width\", \"10%\", 2, \"color\", \"black\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"d-flex\", \"inlineDisplay\", \"cart-total\", \"product\", \"img-prod\"], [\"class\", \"status\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 2, \"width\", \"fit-content\", \"height\", \"30px\", 3, \"click\"], [2, \"font-size\", \"10px\"], [1, \"status\"], [\"type\", \"button\", \"value\", \"Default\", 1, \"btn\", \"btn-success\", 2, \"width\", \"fit-content\", \"height\", \"30px\", 3, \"click\"]],\n      template: function AllAddressComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, AllAddressComponent_div_0_Template, 5, 0, \"div\", 0);\n          i0.ɵɵelement(1, \"hr\");\n          i0.ɵɵtemplate(2, AllAddressComponent_div_2_Template, 2, 1, \"div\", 1)(3, AllAddressComponent_table_3_Template, 10, 1, \"table\", 2)(4, AllAddressComponent_div_4_Template, 2, 1, \"div\", 3);\n          i0.ɵɵelement(5, \"hr\");\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.showSpinner);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.showAlert);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isPC);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isPC);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i5.AppSpinnerComponent],\n      styles: [\".status[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:2px 10px;color:#fff;font-weight:300;background:#82ae46;font-size:12px}\"]\n    });\n  }\n  return AllAddressComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}